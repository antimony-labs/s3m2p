#!/bin/bash
# Pre-commit hook: runs fmt and clippy checks
# Install: git config core.hooksPath .githooks

set -e

echo "=== Pre-commit checks ==="

# Check formatting
echo "Checking formatting..."
cargo fmt --all -- --check
if [ $? -ne 0 ]; then
    echo "ERROR: Formatting issues found. Run 'cargo fmt --all' to fix."
    exit 1
fi

# Run clippy
echo "Running clippy..."
cargo clippy --workspace -- -D warnings
if [ $? -ne 0 ]; then
    echo "ERROR: Clippy warnings found. Fix them before committing."
    exit 1
fi

echo "=== Pre-commit checks passed ==="
